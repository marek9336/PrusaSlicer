pipeline
{
	agent 
	{
		label 'slave-docker'
    	}
	stages 
	{
		stage('Validate Docker')
		{
			steps
			{
				echo "Validate Docker"
				sh 'docker version'
				sh 'docker info'
			}
		}
		stage('Preparation')
		{
			steps
			{
				echo "Preparation"
				sh 'sudo -i'
				sh 'apt-get install cmake'
				sh 'apt-get install make'
				sh 'mkdir -p build && cd build && pwd'
				sh 'cmake --version'
				//cmake(installation: 'cmake', arguments: '--version')
				//cmake(installation: 'cmake', arguments: '--help')
			}
		}
		stage('Build')
		{
			steps
			{
				echo "Build"
				//sh 'cat /var/jenkins_home/workspace/slicer_pipe/build/CMakeFiles/CMakeOutput.log'
				//sh 'pwd'
				
				//cmake(installation: 'cmake', arguments: '-S . -B ./build')
				//make -j8
			}
		}
	}
}


        		label 'Docker_label'
