pipeline
{
	agent any
	stages 
	{
		stage('Preparation')
		{
			steps
			{
				echo 'Vytvoření složky build'
				sh 'mkdir -p build'
			}
		}
		stage('Build')
		{
			steps
			{
				echo 'První build'
				cmake(installation: 'cmake', arguments: '--version')
				
				sh 'cd build'
				
				cmake arguments: '-DCMAKE_TOOLCHAIN_FILE=~/Projects/vcpkg/scripts/buildsystems/vcpkg.cmake', installation: 'cmake'
                		cmakeBuild buildType: 'Release', cleanBuild: true, installation: 'cmake', steps: [[withCmake: true]]
				
				
				
				
				
				cmake(installation: 'cmake', arguments: ' ..')
			}
		}
	}
}
